<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <script>
        //实现灵活的内存动态管理
        //失去数组随机存储的优点，增加节点指针域，空间开销较大

        //单向链表
        class Node {
            constructor(value, next) {
                this.value = value
                this.next = next
            }
        }
        class LinkList {
            constructor() {
                this.dummyNode = new Node(null, null)
                this.size = 0
            }
            find(header, index, currentIndex) {
                //从currentIndex开始找，找到index位置的节点
                if(index===currentIndex) return header
                return this.find(header.next,index,currentIndex+1)
            }
            addNode(v, index) {
                //在index后插入节点
                this.checkIndex(index)
                let prev=this.find(dummyNode,index,0)
                prev.ne=new Node(v,prev.next)
                this.size++
                return prev.next
            }
            insertNode(v, index) {
                return addNode(v, index)
            }
            addToFirst(v) {
                return this.addNode(v,0)
            }
            addToLast(v) {
                return this.addNode(v,this.size)
            }
            removeNode(index, isLast) {
                this.checkIndex(index)
                index=isLast?index-1:index
                let prev=this.find(this.dummyNode,index,0)
                let node=prev.next
                prev.next=node.next
                node.next=null
                this.size--
                return node
            }
            removeFirstNode() {
                return removeNode(0)
            }
            removeLastNode() {
                return removeNode(this.size, true)
            }
            checkIndex(index) {
                if (index < 0 || index > this.size) {
                    throw Error('Index Error')
                }
            }
            getNode(index) {
                this.checkIndex(index)
                if(this.isEmpty())return
                return this.find(this.dummyNode,index,0).next
            }
            isEmpty() {
                return this.size === 0
            }
            getSize() {
                return this.size
            }
        }
    </script>
</body>

</html>